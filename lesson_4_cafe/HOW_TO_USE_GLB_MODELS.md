# Как использовать анимированные GLB модели в Godot

## Быстрый способ (для замены существующих объектов)

### 1. Для кассира:

1. Откройте сцену `cafe.tscn`
2. Найдите узел **Cashier**
3. Удалите старый **MeshInstance3D** (с BoxMesh):
   - Выберите **Cashier → MeshInstance3D**
   - Нажмите Delete или Right Click → Delete Nodes
4. Добавьте модель:
   - Выберите **Cashier**
   - **Right Click → Add Child Node → Instance Child Scene**
   - Выберите ваш GLB файл (например, `greeting.glb`)
   - Модель появится как дочерний узел
5. Настройте позицию и масштаб:
   - Выберите инстанс модели
   - **Transform → Position** - позиция относительно кассира
   - **Transform → Scale** - размер (например, 0.1, 0.1, 0.1 если модель слишком большая)
6. Проверьте анимации:
   - Дважды кликните на GLB файл в FileSystem
   - Посмотрите какие анимации есть (например, "greeting", "idle", "walk")
7. Настройте скрипт:
   - Выберите **Cashier**
   - В Inspector найдите параметры скрипта
   - Установите имена анимаций (например, `wave_animation = "greeting"`)

### 2. Для патрулирующей женщины:

1. В сцене `cafe.tscn` добавьте новый узел:
   - **Right Click на Cafe → Add Child Node → Node3D**
   - Назовите его **"PatrollingWoman"**
2. Добавьте модель:
   - Выберите **PatrollingWoman**
   - **Right Click → Add Child Node → Instance Child Scene**
   - Выберите ваш GLB файл (например, `basic walk.glb`)
3. Прикрепите скрипт:
   - Выберите **PatrollingWoman**
   - **Right Click → Attach Script**
   - Путь: `res://PatrollingNPC.gd`
   - Нажмите **Create**
4. Настройте параметры:
   - **Walk Animation**: имя анимации ходьбы (например, "Walking", "Walk")
   - **Patrol Distance**: расстояние патрулирования (например, 5.0)
   - **Patrol Speed**: скорость (например, 1.5)

### 3. Для еды (пончики, бургер, торт):

1. Найдите узел **Food** (или **Food2**, **Food3**) в сцене
2. Удалите старый **MeshInstance3D** (если есть)
3. Добавьте модель:
   - Выберите **Food**
   - **Right Click → Add Child Node → Instance Child Scene**
   - Выберите GLB файл (например, `Бургер.glb`, `Торт.glb`)
4. Настройте скрипт:
   - Выберите **Food**
   - В Inspector установите **Food Name**: "Бургер" (или "Торт", "Пончики")
   - Цена установится автоматически
5. Настройте позицию и масштаб модели

## Проверка анимаций в модели

Чтобы посмотреть какие анимации есть в GLB модели:

1. В FileSystem найдите ваш GLB файл
2. Дважды кликните на него
3. Godot откроет структуру модели
4. Найдите **AnimationPlayer** в структуре
5. Посмотрите список анимаций (они будут справа в Animation panel)

## Настройка масштаба

Если модель слишком большая или маленькая:

1. Выберите инстанс модели (дочерний узел с GLB)
2. В Inspector найдите **Transform → Scale**
3. Измените значения:
   - Например, 0.1, 0.1, 0.1 - уменьшит в 10 раз
   - Например, 2.0, 2.0, 2.0 - увеличит в 2 раза

## Настройка позиции

1. Выберите инстанс модели
2. В Inspector найдите **Transform → Position**
3. Измените значения X, Y, Z чтобы модель стояла правильно

## Важные моменты

✅ **Используйте Instance Child Scene** - это сохранит анимации  
❌ **Не используйте просто замену Mesh** - это удалит анимации

✅ **GLB формат** - отлично работает с Godot  
✅ **Анимации сохраняются** в AnimationPlayer внутри модели

## Пример структуры после добавления:

```
Cashier (Area3D)
├── CollisionShape3D
└── greeting.glb (Instance)  ← ваша модель с анимациями
    └── (внутри GLB есть AnimationPlayer с анимациями)
```

## Что делать если анимации не работают

1. Проверьте что используете **Instance Child Scene**, а не просто замену Mesh
2. Дважды кликните на GLB файл и проверьте что там есть AnimationPlayer
3. Проверьте имена анимаций в скриптах (должны совпадать с именами в модели)
4. В Inspector скрипта измените параметры анимаций под вашу модель

## Быстрая шпаргалка

**Заменить модель:**
1. Удалить старый MeshInstance3D
2. Add Child Node → Instance Child Scene → выбрать GLB
3. Настроить Position и Scale

**Настроить анимации:**
1. Открыть GLB двойным кликом → посмотреть анимации
2. В Inspector скрипта установить правильные имена анимаций

**Настроить размер:**
1. Выбрать инстанс модели
2. Transform → Scale → изменить значения

